# This is a basic workflow that is manually triggered

name: e2e pipeline

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on:
  workflow_dispatch:
  
# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Runs a single command using the runners shell
    - uses: actions/checkout@v3
    
    - name: Send greeting
      uses: actions/setup-java@v3
      with:
        java-version: '11'
        distribution: 'temurin'
        cache: maven

    - name: Run Unit Tests
      run: mvn test

analyze:
  name: Analyze
  runs-on: ubuntu-latest
  permissions:
    actions: read
    contents: read
    security-events: write

 strategy:
   fail-fast: false
   matrix:
     language: [ 'javascript', 'java']
     # CodeQL supports [ 'cpp', 'csharp', 'go', 'java', 'javascript', 'python', 'ruby' ]

 steps:
 - name: Checkout repository
   uses: actions/checkout@v3

 - name: Initialize CodeQL
   uses: github/codeql-action/init@v2
   with:
     languages: ${{ matrix.language }}

 - name: Autobuild
   uses: github/codeql-action/autobuild@v2

 - name: Perform CodeQL Analysis
   uses: github/codeql-action/analyze@v2
   with:
     category: "/language:${{matrix.language}}"

      
